//================================================================================
//
//    フラグクラスヘッダ
//    Author : Araki Kai                                作成日 : 2018/01/08
//
//================================================================================

#ifndef	_FLAG_H_
#define _FLAG_H_



//**********************************************************************
//
// インクルード文
//
//**********************************************************************

#include <limits.h>



//**********************************************************************
//
// クラス定義
//
//**********************************************************************

class Flag
{
// ============================================================
public :
	// デフォルトコンストラクタ
	Flag();


// ============================================================
public :
	// メンバ関数
	bool CheckAny(const unsigned flag) const;
	bool CheckAll(unsigned flag)       const;
	void Set     (const unsigned flag);
	void Release (const unsigned flag);
	
	unsigned GetFlags() {return flags_;}
	void     Reset()    {flags_ = 0;}


// ============================================================
private:
	// メンバ変数
	unsigned flags_;


};






//**********************************************************************
//
// 非静的メンバ関数定義( inline )
//
//**********************************************************************

//================================================================================
//
// [ デフォルトコンストラクタ ]
//
//================================================================================

inline Flag::Flag()
	: flags_(0)
{
}

//================================================================================
//
// [ フラグ確認関数 ]
//
//================================================================================

inline bool Flag::CheckAny(const unsigned flag) const
{
	return (flags_ & flag) != 0;
}



//================================================================================
//
// [ フラグ確認関数(全チェックフラグがONかどうか) ]
//
//================================================================================

inline bool Flag::CheckAll(unsigned flag) const
{
	// チェックフラグを反転しORをとる
	flag = flags_ | ~flag;

	// 全てFlagが立っているかどうか
	return flag == UINT_MAX;
}



//================================================================================
//
// [ フラグ設定関数 ]
//
//================================================================================

inline void Flag::Set(const unsigned flag)
{
	flags_ |= flag;
}



//================================================================================
//
// [ フラグ解放関数 ]
//
//================================================================================

inline void Flag::Release(const unsigned flag)
{
	flags_ &= ~flag;
}



#endif